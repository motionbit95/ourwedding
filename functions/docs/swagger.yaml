openapi: "3.0.0"
info:
  title: "ì•„ì›Œì›¨ë”© - Firebase Functions API"
  version: "1.0.0"
  description: |
    ## ğŸš€ API ì—”ë“œí¬ì¸íŠ¸ ì•ˆë‚´
    ë°°í¬ ì™„ë£Œ í›„ ì•„ë˜ ì£¼ì†Œì—ì„œ APIë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    - `https://example.cloudfunctions.net/api`
    - `https://example.a.run.app`

servers:
  - url: "https://example.cloudfunctions.net/api"
    description: "ë©”ì¸ API ì„œë²„"
  - url: "https://example.a.run.app"
    description: "ë°±ì—… API ì„œë²„"

paths:
  ### ğŸ” **ì¸ì¦ API**
  /auth/signup:
    post:
      tags:
        - ì¸ì¦ (Auth)
      summary: "íšŒì›ê°€ì…"
      description: "ë„¤ì´ë²„ IDë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹ ê·œ íšŒì›ì„ ë“±ë¡í•©ë‹ˆë‹¤."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_name:
                  type: string
                  example: "ë°•ìˆ˜ì •"
                naver_id:
                  type: string
                  example: "krystal_naver"
      responses:
        "201":
          description: "íšŒì›ê°€ì… ì„±ê³µ"
        "400":
          description: "ì˜ëª»ëœ ìš”ì²­ (í•„ìˆ˜ ê°’ ëˆ„ë½ ë˜ëŠ” ì¤‘ë³µ ID)"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

  /auth/login:
    post:
      tags:
        - ì¸ì¦ (Auth)
      summary: "ë¡œê·¸ì¸"
      description: "ì‚¬ìš©ì ì¸ì¦ í›„ JWT í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_name:
                  type: string
                  example: "ë°•ìˆ˜ì •"
                naver_id:
                  type: string
                  example: "krystal_naver"
      responses:
        "200":
          description: "ë¡œê·¸ì¸ ì„±ê³µ (JWT í† í° ë°˜í™˜)"
        "400":
          description: "ì˜ëª»ëœ ë¡œê·¸ì¸ ì •ë³´"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

  /auth/verify-token:
    post:
      tags:
        - ì¸ì¦ (Auth)
      summary: "JWT í† í° ê²€ì¦"
      description: "JWT í† í°ì„ ê²€ì¦í•˜ê³  ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤."
      security:
        - bearerAuth: []
      responses:
        "200":
          description: "í† í° ê²€ì¦ ì„±ê³µ"
        "401":
          description: "ìœ íš¨í•˜ì§€ ì•Šê±°ë‚˜ ëˆ„ë½ëœ í† í°"

  ### ğŸ“¤ **íŒŒì¼ ì—…ë¡œë“œ API**
  /upload:
    post:
      tags:
        - ìœ í‹¸ë¦¬í‹° (Util)
      summary: "íŒŒì¼ ì—…ë¡œë“œ"
      description: "ë‹¨ì¼ íŒŒì¼ì„ ì—…ë¡œë“œí•©ë‹ˆë‹¤."
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "200":
          description: "íŒŒì¼ ì—…ë¡œë“œ ì„±ê³µ"
        "400":
          description: "ì˜ëª»ëœ ìš”ì²­ (íŒŒì¼ ëˆ„ë½ ë˜ëŠ” í˜•ì‹ ì˜¤ë¥˜)"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

  ### ğŸ› **ì£¼ë¬¸ API**
  /order:
    post:
      summary: "ìƒˆë¡œìš´ ì£¼ë¬¸ ìƒì„±"
      description: "ì£¼ë¬¸ ì •ë³´ë¥¼ Firebase Realtime Databaseì— ì €ì¥í•©ë‹ˆë‹¤."
      tags:
        - ì£¼ë¬¸ (Orders)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Order"
      responses:
        "200":
          description: "ì£¼ë¬¸ ì €ì¥ ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  orderId:
                    type: string
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

    get:
      summary: "ëª¨ë“  ì£¼ë¬¸ ì¡°íšŒ"
      description: "ì €ì¥ëœ ëª¨ë“  ì£¼ë¬¸ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤."
      tags:
        - ì£¼ë¬¸ (Orders)
      responses:
        "200":
          description: "ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  orders:
                    type: object
                    additionalProperties:
                      $ref: "#/components/schemas/Order"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

  /order/{orderId}:
    get:
      summary: "íŠ¹ì • ì£¼ë¬¸ ì¡°íšŒ"
      description: "ì£¼ë¬¸ IDë¥¼ ì´ìš©í•˜ì—¬ íŠ¹ì • ì£¼ë¬¸ì„ ì¡°íšŒí•©ë‹ˆë‹¤."
      tags:
        - ì£¼ë¬¸ (Orders)
      parameters:
        - name: orderId
          in: path
          required: true
          schema:
            type: string
          description: "ì¡°íšŒí•  ì£¼ë¬¸ì˜ ID"
      responses:
        "200":
          description: "ì£¼ë¬¸ ì¡°íšŒ ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  order:
                    $ref: "#/components/schemas/Order"
        "404":
          description: "ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

    put:
      summary: "ì£¼ë¬¸ ìˆ˜ì •"
      description: "íŠ¹ì • ì£¼ë¬¸ì„ ìˆ˜ì •í•©ë‹ˆë‹¤."
      tags:
        - ì£¼ë¬¸ (Orders)
      parameters:
        - name: orderId
          in: path
          required: true
          schema:
            type: string
          description: "ìˆ˜ì •í•  ì£¼ë¬¸ì˜ ID"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Order"
      responses:
        "200":
          description: "ì£¼ë¬¸ ìˆ˜ì • ì„±ê³µ"
        "404":
          description: "ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

    delete:
      summary: "ì£¼ë¬¸ ì‚­ì œ"
      description: "íŠ¹ì • ì£¼ë¬¸ì„ ì‚­ì œí•©ë‹ˆë‹¤."
      tags:
        - ì£¼ë¬¸ (Orders)
      parameters:
        - name: orderId
          in: path
          required: true
          schema:
            type: string
          description: "ì‚­ì œí•  ì£¼ë¬¸ì˜ ID"
      responses:
        "200":
          description: "ì£¼ë¬¸ ì‚­ì œ ì„±ê³µ"
        "404":
          description: "ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

  /admin/signup:
    post:
      summary: "ê´€ë¦¬ì íšŒì›ê°€ì…"
      description: "ìƒˆë¡œìš´ ê´€ë¦¬ìë¥¼ ë“±ë¡í•©ë‹ˆë‹¤."
      tags:
        - ê´€ë¦¬ì (Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                admin_id:
                  type: string
                  example: "admin01"
                admin_pw:
                  type: string
                  example: "securepassword"
      responses:
        "201":
          description: "ê´€ë¦¬ì íšŒì›ê°€ì… ì„±ê³µ"
        "400":
          description: "ì˜ëª»ëœ ìš”ì²­ (ì…ë ¥ê°’ ì˜¤ë¥˜ ë˜ëŠ” ì¤‘ë³µ ì•„ì´ë””)"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

  /admin/login:
    post:
      summary: "ê´€ë¦¬ì ë¡œê·¸ì¸"
      description: "ê´€ë¦¬ìê°€ ë¡œê·¸ì¸í•˜ë©´ JWT í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤."
      tags:
        - ê´€ë¦¬ì (Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                admin_id:
                  type: string
                  example: "admin01"
                admin_pw:
                  type: string
                  example: "securepassword"
      responses:
        "200":
          description: "ë¡œê·¸ì¸ ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ"
                  token:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsIn..."
                  lastActiveAt:
                    type: string
                    format: date-time
                    example: "2025-04-03T12:00:00Z"
        "400":
          description: "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

  /admin:
    get:
      summary: "ê´€ë¦¬ì ëª©ë¡ ì¡°íšŒ"
      description: "ë“±ë¡ëœ ê´€ë¦¬ì ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤."
      tags:
        - ê´€ë¦¬ì (Admin)
      responses:
        "200":
          description: "ê´€ë¦¬ì ëª©ë¡ ì¡°íšŒ ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  $ref: "#/components/schemas/Admin"
        "404":
          description: "ë“±ë¡ëœ ê´€ë¦¬ìê°€ ì—†ìŒ"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

  /admin/{admin_id}:
    delete:
      summary: "ê´€ë¦¬ì íƒˆí‡´"
      description: "íŠ¹ì • ê´€ë¦¬ìë¥¼ ì‚­ì œí•©ë‹ˆë‹¤."
      tags:
        - ê´€ë¦¬ì (Admin)
      parameters:
        - name: admin_id
          in: path
          required: true
          schema:
            type: string
          description: "ì‚­ì œí•  ê´€ë¦¬ì ID"
      responses:
        "200":
          description: "ê´€ë¦¬ì íƒˆí‡´ ì„±ê³µ"
        "400":
          description: "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê´€ë¦¬ì ID"
        "500":
          description: "ì„œë²„ ì˜¤ë¥˜"

### ğŸ›  **ê³µí†µ ìŠ¤í‚¤ë§ˆ (Schemas)**
components:
  schemas:
    Order:
      type: object
      properties:
        userName:
          type: string
          example: "ë°•ìˆ˜ì •"
        userId:
          type: string
          example: "krystal"
        receivedDate:
          type: string
          format: date
          example: "2025-04-03"
        orderNumber:
          type: string
          example: "asdf"
        grade:
          type: string
          example: "2 ìƒˆì‹¹"
        photoCount:
          type: string
          example: "6"
        additionalOptions:
          type: array
          items:
            type: string
          example: ["person"]
        photoDownload:
          type: array
          items:
            type: string
          example: ["https://drive.google.com/..."]
        referenceDownload:
          type: string
          example: "https://drive.google.com/..."

    Admin:
      type: object
      properties:
        admin_id:
          type: string
          example: "admin01"
        createdAt:
          type: string
          format: date-time
          example: "2025-04-03T12:00:00Z"
        lastActiveAt:
          type: string
          format: date-time
          example: "2025-04-03T15:30:00Z"

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
